<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation Technique - Projet Notification Absences</title>
    <style>
        /* --- DESIGN SYST√àME --- */
        :root {
            --primary: #2563eb;       /* Bleu vif */
            --secondary: #475569;     /* Gris texte */
            --bg-sidebar: #f8fafc;    /* Gris tr√®s clair */
            --bg-code: #1e293b;       /* Fond sombre pour code */
            --accent: #0ea5e9;        /* Bleu ciel */
            --success: #10b981;       /* Vert */
            --warning: #f59e0b;       /* Orange */
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            margin: 0;
            display: flex;
            min-height: 100vh;
            color: #334155;
            line-height: 1.6;
        }

        /* --- SIDEBAR --- */
        aside {
            width: 280px;
            background: var(--bg-sidebar);
            border-right: 1px solid #e2e8f0;
            padding: 2rem;
            position: fixed;
            height: 100%;
            overflow-y: auto;
        }

        aside h3 {
            color: var(--primary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1.5rem;
        }

        aside ul {
            list-style: none;
            padding: 0;
        }

        aside li { margin-bottom: 0.8rem; }

        aside a {
            text-decoration: none;
            color: var(--secondary);
            font-weight: 500;
            transition: 0.2s;
            display: block;
            padding: 0.5rem;
            border-radius: 6px;
        }

        aside a:hover {
            background: #e0f2fe;
            color: var(--primary);
        }

        /* --- CONTENU PRINCIPAL --- */
        main {
            margin-left: 280px;
            padding: 4rem 6rem;
            flex: 1;
            max-width: 1000px;
        }

        h1 {
            font-size: 2.5rem;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        h2 {
            font-size: 1.8rem;
            color: #1e293b;
            margin-top: 4rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e2e8f0;
        }

        h3 {
            font-size: 1.4rem;
            color: var(--primary);
            margin-top: 2.5rem;
        }

        p { margin-bottom: 1.5rem; font-size: 1.05rem; }

        /* --- BOITES SP√âCIALES --- */
        .card-infra {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            margin: 2rem 0;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .card-infra h3 { color: #38bdf8; margin-top: 0; }
        .card-infra code { background: rgba(255,255,255,0.1); color: #fff; }

        .note {
            background-color: #f0f9ff;
            border-left: 4px solid var(--primary);
            padding: 1.5rem;
            border-radius: 6px;
            margin: 2rem 0;
        }
        
        .note-warning {
            background-color: #fffbeb;
            border-left: 4px solid var(--warning);
            padding: 1.5rem;
            border-radius: 6px;
            margin: 2rem 0;
            color: #92400e;
        }

        /* --- ARBORESCENCE & CODE --- */
        pre {
            background-color: var(--bg-code);
            color: #f1f5f9;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Consolas', monospace;
            font-size: 0.95rem;
            border: 1px solid #334155;
        }

        code {
            font-family: 'Consolas', monospace;
            background: #f1f5f9;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            color: #d946ef;
            font-size: 0.9em;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .tree-line { line-height: 1.4; color: #94a3b8; }
        .tree-folder { color: #facc15; font-weight: bold; } /* Jaune */
        .tree-file { color: #e2e8f0; }

        /* --- TABLEAUX --- */
        table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
        th, td { border: 1px solid #e2e8f0; padding: 0.8rem; text-align: left; }
        th { background: #f8fafc; font-weight: 600; }

        /* --- RESPONSIVE --- */
        @media (max-width: 900px) {
            aside { display: none; }
            main { margin-left: 0; padding: 2rem; }
        }
    </style>
</head>
<body>

    <aside>
        <h3>Menu Projet</h3>
        <ul>
            <li><a href="#infra">1. Infrastructure & Cloud</a></li>
            <li><a href="#workflow">2. M√©thode de Travail</a></li>
            <li><a href="#arborescence">3. Structure des Dossiers</a></li>
            <li><a href="#etapes">4. Plan d'Action</a></li>
            <li><a href="#techno">5. Technologies</a></li>
            <li><a href="#phpmyadmin">6. Base de Donn√©es</a></li>
        </ul>
    </aside>

    <main>
        <header>
            <h1>Projet : Notification Absences</h1>
            <p>Guide technique et organisationnel pour l'√©quipe de d√©veloppement.</p>
        </header>

        <section id="infra">
            <h2>1. Infrastructure & D√©ploiement Automatique</h2>
            
            <div class="card-infra">
                <h3>üöÄ Serveur en Ligne & Op√©rationnel</h3>
                <p>Pour gagner du temps, l'environnement de production est d√©j√† configur√© par Amr. Le projet est h√©berg√© sur le <strong>Cloud (Google Cloud Platform)</strong> et est accessible mondialement.</p>
                <p><strong>URL du projet :</strong> <a href="http://eidia-absences.duckdns.org" style="color:#38bdf8" target="_blank">http://eidia-absences.duckdns.org</a></p>
                <p>Le nom de domaine est s√©curis√© et pointe directement sur notre serveur.</p>
            </div>

            <h3>La Magie du CI/CD (Comment le site se met √† jour ?)</h3>
            <p>Nous avons mis en place un syst√®me de <strong>CI/CD</strong> (Int√©gration Continue / D√©ploiement Continu). Pour faire simple, imaginez un robot invisible qui surveille notre code 24h/24.</p>
            
            <div class="note">
                <strong>Comment √ßa marche ?</strong><br>
                √Ä chaque fois que vous envoyez votre code sur GitHub (<code>git push</code>), ce "robot" attrape vos modifications, court vers le serveur Google Cloud, et met √† jour le site instantan√©ment.
                <br><br>
                üëâ <strong>R√©sultat :</strong> Pas besoin d'utiliser FileZilla ou de copier des fichiers manuellement. Tout est automatique. Le prof verra toujours la derni√®re version de notre travail.
            </div>
        </section>

        <section id="workflow">
            <h2>2. M√©thode de Travail (Git)</h2>
            <p>Pour que le "robot" CI/CD fonctionne sans tout casser, nous devons suivre une discipline stricte. Amr veillera √† ce que les fusions (merges) soient propres, mais chacun doit respecter ces commandes.</p>

            <h3>La R√®gle d'Or</h3>
            <p>Avant de commencer √† travailler sur une t√¢che, il faut toujours r√©cup√©rer la derni√®re version du travail des autres pour √©viter les conflits.</p>

            <pre><code># 1. Avant de coder : R√©cup√©rer les nouveaut√©s
git pull --rebase

# 2. Vous travaillez en local (sur votre machine)...
# ... Modification des fichiers ...

# 3. Envoyer votre travail
git add .
git commit -m "Description de ce que j'ai fait"
git push</code></pre>
        </section>

        <section id="arborescence">
            <h2>3. Architecture du Projet (MVC Simplifi√©)</h2>
            <p>Pour ne pas se marcher dessus, chaque fichier a une place pr√©cise. Voici l'organisation des dossiers √† respecter sur le d√©p√¥t :</p>

            <pre><span class="tree-folder">/notification-parents</span>
‚îÇ
‚îú‚îÄ‚îÄ <span class="tree-folder">config/</span>                  <span class="tree-line"># LA SALLE DES MACHINES</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="tree-file">db.php</span>               <span class="tree-line"># Connexion Base de Donn√©es (PDO)</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="tree-file">config.php</span>           <span class="tree-line"># Cl√©s API & Param√®tres SMTP</span>
‚îÇ
‚îú‚îÄ‚îÄ <span class="tree-folder">public/</span>                  <span class="tree-line"># LA VITRINE (Seul dossier visible web)</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="tree-folder">assets/</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="tree-file">style.css</span>        <span class="tree-line"># Design & CSS</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="tree-file">script.js</span>        <span class="tree-line"># JS Interactif</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="tree-folder">uploads/</span>             <span class="tree-line"># Dossier temporaire des CSV</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="tree-file">index.php</span>            <span class="tree-line"># LE GARDIEN (Routeur unique)</span>
‚îÇ
‚îú‚îÄ‚îÄ <span class="tree-folder">src/</span>                     <span class="tree-line"># LE CERVEAU (Logique PHP)</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="tree-folder">Controllers/</span>         <span class="tree-line"># Ils dirigent les requ√™tes</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="tree-file">AuthController.php</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="tree-file">ImportController.php</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="tree-folder">Models/</span>              <span class="tree-line"># Ils parlent √† la BDD (SQL)</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="tree-file">Absence.php</span>
‚îÇ   ‚îî‚îÄ‚îÄ <span class="tree-folder">Services/</span>            <span class="tree-line"># Les Outils Techniques</span>
‚îÇ       ‚îú‚îÄ‚îÄ <span class="tree-file">CsvDetector.php</span>  <span class="tree-line"># Algo intelligent (Levenshtein)</span>
‚îÇ       ‚îî‚îÄ‚îÄ <span class="tree-file">WhatsAppService.php</span>
‚îÇ
‚îî‚îÄ‚îÄ <span class="tree-folder">templates/</span>               <span class="tree-line"># LE VISAGE (Vues HTML)</span>
    ‚îú‚îÄ‚îÄ <span class="tree-file">header.php</span>
    ‚îú‚îÄ‚îÄ <span class="tree-file">sidebar.php</span>
    ‚îú‚îÄ‚îÄ <span class="tree-file">dashboard.php</span>
    ‚îî‚îÄ‚îÄ <span class="tree-file">login.php</span></pre>
        </section>

        <section id="etapes">
            <h2>4. Ordre Chronologique des T√¢ches</h2>
            <p>Nous allons proc√©der par √©tape logique. On ne passe pas √† la suite tant que l'√©tape en cours n'est pas valid√©e.</p>

            <div style="border-left: 3px solid #cbd5e1; padding-left: 20px;">
                
                <h3>√âtape 1 : Fondations (Termin√© ‚úÖ)</h3>
                <p>Mise en place du serveur GCP, Domaine DuckDNS, Base de donn√©es MySQL et structure Git. Le "squelette" est pr√™t.</p>

                <h3>√âtape 2 : Authentification & Design</h3>
                <p>Cr√©ation de l'interface graphique (HTML/CSS) et s√©curisation de l'acc√®s (Page Login). L'objectif est de pouvoir se connecter et voir un tableau de bord vide.</p>

                <h3>√âtape 3 : Le C≈ìur (Import CSV Intelligent)</h3>
                <p>D√©veloppement de l'algorithme qui lit le fichier Excel/CSV, devine les colonnes (Nom, Pr√©nom...) et injecte les donn√©es dans la base de donn√©es. C'est la partie la plus importante du projet.</p>

                <h3>√âtape 4 : Affichage des Donn√©es</h3>
                <p>Une fois la base remplie, on code les tableaux pour visualiser les √©l√®ves, filtrer par classe ou par date d'absence sur le dashboard.</p>

                <h3>√âtape 5 : Les Canaux de Communication</h3>
                <p>Connexion aux API externes. On branche le syst√®me pour que lorsqu'on clique sur "Notifier", un Email et un WhatsApp partent automatiquement aux parents.</p>

            </div>
        </section>

        <section id="techno">
            <h2>5. Stack Technique</h2>
            <p>Pour rappel, voici les technologies valid√©es pour ce projet :</p>
            <ul>
                <li><strong>Backend :</strong> PHP 8 (Natif, structur√© MVC).</li>
                <li><strong>Base de donn√©es :</strong> MySQL (Avec gestion tables dynamiques mensuelles).</li>
                <li><strong>Frontend :</strong> HTML5, CSS3 (Responsive), JS (Chart.js pour les stats).</li>
                <li><strong>APIs :</strong> Twilio (WhatsApp) & PHPMailer (SMTP).</li>
            </ul>
        </section>

        <section id="phpmyadmin">
            <h2>6. Base de Donn√©es & Gestion (IMPORTANT)</h2>
            
            <div class="note-warning" style="border-left: 4px solid #f59e0b; background: #fffbeb; padding: 1.5rem; border-radius: 6px; margin-bottom: 2rem;">
                <h3 style="color: #92400e; margin-top: 0;">‚ö†Ô∏è Stop : Lisez ceci avant de coder</h3>
                <p>Une confusion fr√©quente est de croire que le lien PhpMyAdmin est "magique". Clarifions les choses :</p>
                <ul>
                    <li><strong>PhpMyAdmin N'EST PAS la base de donn√©es :</strong> C'est juste une lunette pour <em>regarder</em> ce qu'il y a dedans.</li>
                    <li><strong>Il n'y a PAS de "synchronisation automatique" par le lien :</strong> Ce n'est pas parce que vous avez le lien ouvert que votre code PHP est connect√©. Votre code PHP se connecte gr√¢ce au fichier <code>config/db.php</code>.</li>
                </ul>
            </div>

            <h3>1. L'Acc√®s "Secret" (Pour nous uniquement)</h3>
            <p>Nous n'utilisons pas l'interface standard. L'acc√®s √† la gestion de la base se fait via cette URL s√©curis√©e :</p>
            
            <div class="card-infra" style="text-align: center;">
                <p style="font-size: 1.2rem; font-weight: bold; margin-bottom: 0.5rem;">
                    üîó <a href="http://eidia-absences.duckdns.org/base-secrete-ekip" target="_blank" style="color: #38bdf8; text-decoration: underline;">eidia-absences.duckdns.org/base-secrete-ekip</a>
                </p>
            </div>

            <h3>2. Comment travailler avec la Base de Donn√©es ?</h3>
            <p>Voici le workflow obligatoire pour √©viter de tout casser :</p>

            <table>
                <tr>
                    <th style="width: 30%;">Action</th>
                    <th>O√π √ßa se passe ?</th>
                    <th>Explication</th>
                </tr>
                <tr>
                    <td><strong>1. Cr√©er une table</strong></td>
                    <td><span style="color: #d97706;">PhpMyAdmin (Le lien secret)</span></td>
                    <td>Vous allez sur le lien, vous cr√©ez la table (ex: <code>eleves</code>) avec les colonnes n√©cessaires.</td>
                </tr>
                <tr>
                    <td><strong>2. Connecter le Code</strong></td>
                    <td><span style="color: #2563eb;">VS Code (config/db.php)</span></td>
                    <td>On s'assure que le fichier <code>db.php</code> contient les bons identifiants. C'est le "c√¢ble" entre le site et le serveur.</td>
                </tr>
                <tr>
                    <td><strong>3. Coder la logique</strong></td>
                    <td><span style="color: #2563eb;">VS Code (src/Models)</span></td>
                    <td>Dans vos fichiers PHP, vous √©crivez le SQL. <br><em>Exemple :</em> Si vous avez cr√©√© une colonne <code>nom</code> dans PhpMyAdmin, votre code PHP doit faire <code>INSERT INTO eleves (nom)...</code>. Si vous changez le nom de la colonne dans PhpMyAdmin sans changer le code PHP, <strong>√ßa plante.</strong></td>
                </tr>
            </table>

            <div class="note" style="margin-top: 2rem;">
                <strong>üí° En r√©sum√© :</strong><br>
                PhpMyAdmin sert √† <strong>construire</strong> l'armoire (les tables).<br>
                Le Code PHP sert √† <strong>ranger</strong> les dossiers dedans (les donn√©es).
            </div>
        </section>

        <footer style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid #e2e8f0; color: #64748b; font-size: 0.9rem; text-align: center;">
            <p>Documentation Projet - √âquipe Ekip - 2026</p>
        </footer>
    </main>

</body>
</html>
